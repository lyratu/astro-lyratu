---
import Layout from '../layouts/Layout.astro';
import { getPublishedPosts } from '../lib/posts';

const latestPosts = (await getPublishedPosts()).slice(0, 5);
---

<Layout>
	<h1>欢迎</h1>
	<p>这里是博客首页，可以展示最新文章或站点简介。</p>
	{latestPosts.length > 0 && (
		<section>
			<h2>最新文章</h2>
			<ul class="post-preview-list">
				{latestPosts.map((post) => (
					<li>
						<a href={`/blog/${post.id}/`}>{post.data.title}</a>
						<time datetime={post.data.pubDate.toISOString()}>
							{post.data.pubDate.toLocaleDateString('zh-CN')}
						</time>
					</li>
				))}
			</ul>
			<p><a href="/blog/">查看全部文章 →</a></p>
		</section>
	)}
</Layout>
<style>
	.post-preview-list {
		list-style: none;
		padding: 0;
		margin: 0.5em 0;
	}
	.post-preview-list li {
		display: flex;
		justify-content: space-between;
		gap: 1em;
		margin-bottom: 0.5em;
	}
	.post-preview-list a {
		text-decoration: none;
	}
	.post-preview-list time {
		color: rgb(var(--gray));
		font-size: 0.9em;
	}
</style>
